jQuery(document).ready(function(c){"use strict";c("#ywsbs_safe_submit_field").val("");"undefined"!=typeof yith_ywsbs_admin&&yith_ywsbs_admin.block_loader;c(document).on("click",".load_customer_info",function(e){e.preventDefault();var t=c(this);!function(t,i,e){var s=t==i?"load_"+t:"copy_billing";if(!0===e||window.confirm(yith_ywsbs_admin[s])){var o=c("#user_id").val();if(0==o)return window.alert(yith_ywsbs_admin.no_customer_selected);var n={user_id:o,action:"woocommerce_get_customer_details",security:yith_ywsbs_admin.get_customer_details_nonce};c.ajax({url:yith_ywsbs_admin.ajaxurl,data:n,type:"POST",success:function(e){e&&e[t]&&c.each(e[t],function(e,t){c("#_"+i+"_"+e).val(t).change()})}})}}(t.data("from"),t.data("to"))}),c(document).on("click","a.edit_address",function(e){e.preventDefault();var t=c(this),i=t.closest(".subscription_data_column").find("div.edit_address"),s=t.closest(".subscription_data_column").find("a");t.closest(".subscription_data_column").find("div.address").toggle(),s.toggle(),i.toggle()}),c.fn.datetimepicker!==undefined&&c(document).find(".ywsbs-timepicker").each(function(){c(this).datetimepicker({timeFormat:"HH:mm:00",defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0})}),c("#ywsbs_schedule_subscription_button").on("click",function(e){e.preventDefault(),c("#ywsbs_safe_submit_field").val("schedule_subscription"),c(this).closest("form").submit()});var t={init:function(){var e=c(document).find("#woocommerce-order-items");e.on("click","a.edit-order-item",this.edit_item),e.on("click",".save-action",this.save_items),e.on("click",".recalculate-action",this.recalculate)},edit_item:function(){return c(this).closest("tr").find(".view").hide(),c(this).closest("tr").find(".edit").show(),c(this).hide(),c(".wc-order-add-item").show(),c(".wc-order-recalculate").hide(),c("button.cancel-action").attr("data-reload",!0),!1},save_items:function(){var e={subscription_id:c("#post_ID").val(),items:c("table.woocommerce_order_items :input[name], .wc-order-totals-items :input[name]").serialize(),action:"ywsbs_save_items",security:yith_ywsbs_admin.save_item_nonce};return c.ajax({url:yith_ywsbs_admin.ajaxurl,data:e,type:"POST",beforeSend:function(){c("#woocommerce-order-items").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},success:function(e){c("#ywsbs-product-subscription").find(".inside").empty().append(e),c("#woocommerce-order-items").unblock(),t.init()}}),!1},recalculate:function(){var e={subscription_id:c("#post_ID").val(),action:"ywsbs_recalculate",security:yith_ywsbs_admin.recalculate_nonce};c.ajax({url:yith_ywsbs_admin.ajaxurl,data:e,type:"POST",beforeSend:function(){c("#woocommerce-order-items").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},success:function(e){c("#ywsbs-product-subscription").find(".inside").empty().append(e),c("#woocommerce-order-items").unblock(),t.init()}})}};t.init()});