jQuery(document).ready(function(a){a(document).on("click",".ywbc_apply_barcode",function(e){e.preventDefault();var c=a(this).data("item_ids"),o=a(this).data("barcode_action"),s=a("#ywbc_apply_progressbar_all"),t=a("#ywbc_apply_progressbar_percent_all"),n=a(".ywbc_apply_messages");n.hide(),s.progressbar(),t.html("0% (0/"+c.length+")"),s.show();var r=c.length;a(this).prop("disabled",!0),function e(d,l){var i={ywbc_item_id:l,action:o};a.ajax({type:"POST",url:ywbc_params.ajax_url,data:i,dataType:"json",success:function(o){"barcode_created"==o.result?(s.progressbar("value",(d+1)/r*100),t.html(Math.round((d+1)/r*1e3)/10+"% ("+(d+1)+"/"+c.length+")"),d<r-1?e(++d,c[d]):(n.addClass("complete_all_task"),n.find(".ywbc_apply_icon").addClass("dashicons dashicons-yes"),n.find(".ywbc_apply_text").html(ywbc_params.messages.complete_task),n.show(),s.hide(),a(".ywbc_apply_barcode").prop("disabled",!1))):(n.addClass("error_task"),n.find(".ywbc_apply_icon").addClass("dashicons dashicons-no"),n.find(".ywbc_apply_text").html(ywbc_params.messages.error_task),n.show(),s.hide(),a(".ywbc_apply_barcode").prop("disabled",!1))}})}(0,c[0])}),a(document).on("click",".ywbc-print-barcode",function(e){e.preventDefault();var c=a(this).data("item_ids"),o=a(".ywbc-print-barcode-tr"),s={action:"print_product_barcodes_document",ywbc_item_ids:c};o.block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.7}}),a.ajax({type:"POST",url:ywbc_params.ajax_url,data:s,success:function(e){console.log("Processing, do not cancel"),a("#aux-print-barcodes").append(e.result);var c=document.getElementById("aux-print-barcodes");newWin=window.open(""),newWin.document.write(c.outerHTML),newWin.print(),newWin.close(),a("#aux-print-barcodes").html(""),o.unblock()},error:function(a){return console.log("ERROR"),console.log(a),o.unblock(),!1}})})});
