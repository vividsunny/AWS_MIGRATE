!function(i){i(document).ready(function(){var e,r=null;function c(){i(".ywbc-action-results").empty();var e=r.closest('form[name="yith-barcodes-form"]');if(e.find('input[name="yith-barcode-value"]').val()){var a={action:"barcode_actions_search_"+e.data("barcode-type"),text:e.find('input[name="yith-barcode-value"]').val(),"barcode-actions":e.data("barcode-actions")};e.block({message:null,overlayCSS:{background:"#fff url("+ywbc_data.loader+") no-repeat center",opacity:.6}}),i.post(ywbc_data.ajax_url,a,function(a){1==a.code?e.append('<div class="ywbc-action-results">'+a.items+"</div>"):-1==a.code&&(e.append('<div class="ywbc-action-results error">'+a.items+"</div>"),console.log("Error -> "+a.items)),e.unblock()})}}i('form[name="yith-barcodes-form"]').submit(function(a){a.preventDefault()}),i('input[name="yith-barcode-value"]').on("keyup",function(a){a.preventDefault(),e&&clearTimeout(e),r=i(this),e=setTimeout(c,1e3)}),i(document).on("click","button.ywbc-action",function(a){a.preventDefault();var e=i(this).closest(".yith-barcode-actions"),c=r.closest('form[name="yith-barcodes-form"]'),o=i(this).closest("tr.ywbc-search-row"),t={action:"apply_barcode_action",status:i(this).data("status"),type:i(this).data("type"),"barcode-actions":c.data("barcode-actions"),id:i(this).data("id")};e.block({message:null,overlayCSS:{background:"#fff url("+ywbc_data.loader+") no-repeat center",opacity:.6}}),i.post(ywbc_data.ajax_url,t,function(a){1==a.code&&o.replaceWith(a.items),e.unblock()})});var o=i("#ywbc_barcode_value img.ywbc-barcode-image").length?i("#ywbc_barcode_value img.ywbc-barcode-image").attr("src"):"",t=i("#ywbc_barcode_value .ywbc-barcode-display-value").length?i("#ywbc_barcode_value .ywbc-barcode-display-value").text():"";i(document).on("found_variation","form.variations_form",function(a,e){$variation_barcode_img=e.barcode_img?e.barcode_img:o,$variation_barcode_value=e.barcode_img?e.barcode_value:t,""!=$variation_barcode_img&&(i("img.ywbc-barcode-image").length?(i("#ywbc_barcode_value img.ywbc-barcode-image").attr("src",$variation_barcode_img),i("#ywbc_barcode_value .ywbc-barcode-display-value").text($variation_barcode_value)):i("#ywbc_barcode_value").append('<img class="ywbc-barcode-image" src="'+$variation_barcode_img+'"><div class="ywbc-barcode-display-container"><span class="ywbc-barcode-display-value">'+$variation_barcode_value+"</span></div>"))}).on("reset_image",function(a){i("#ywbc_barcode_value img.ywbc-barcode-image").attr("src",o),i("#ywbc_barcode_value .ywbc-barcode-display-value").text(t)})})}(jQuery);