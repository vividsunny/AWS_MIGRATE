!function(b,e,v){b.fn.yith_wcbk_people_selector=function(t){var l=this,a=b(this),s=!1,c="",e=!1,o=function(){b(v).on("click",u),b(v).on("click","."+t["class"],function(e){e.stopPropagation()});var e=b(".yith_wcbk_booking_product_form_widget"),o=a.attr("id"),n=!!o&&b('label[for="'+o+'"]');e.on("click",u),e.on("click","."+t["class"],function(e){e.stopPropagation()}),a.on("click",t.openHandler_selector,_),a.on("click",t.closeHandler_selector,u),a.on("click",t.toggleHandler_selector,d),a.on("open",_),a.on("close",u),s.on("change",p),n&&n.length&&n.on("click",d)},n=function(){var e=a.data("min"),o=a.data("max");l.min=void 0!==e&&parseInt(e),l.max=void 0!==o&&parseInt(o)},i=function(){c=a.find(t.totals_selector)||"",e=a.find(t.fieldsContainer_selector)||"",s=a.find(t.field_selector)||!1,r(),s&&s.each(function(){b(this).yith_wcbk_people_selector_field({canIncreaseGlobal:function(){return!1===l.max||l.value<l.max},canDecreaseGlobal:function(){return!1===l.min||l.value>l.min},onUpdate:function(){s.trigger("enableDisableButtons")}})})},r=function(){var e=0;s&&s.each(function(){e+=parseInt(b(this).yith_wcbk_people_selector_field("getValue"))}),l.value=e},p=function(e){var o,n=e||!0;r(),o=1<l.value?t.plural_label.replace("%s",l.value.toString()):1===l.value?t.singular_label:t.zero_label,c.text(o),n&&a.trigger("change")},_=function(){a.removeClass(t.closed_class).addClass(t.opened_class),e&&e.show(),t.onOpen()},u=function(){a.removeClass(t.opened_class).addClass(t.closed_class),e&&e.hide(),t.onClose()},d=function(e){"object"==typeof e&&"undefined"!=typeof e.stopPropagation&&e.stopPropagation(),a.hasClass(t.opened_class)?u():_()},f={zero_label:yith_people_selector_params.i18n_zero_person,singular_label:yith_people_selector_params.i18n_one_person,plural_label:yith_people_selector_params.i18n_more_persons,"class":"yith-wcbk-people-selector",totals_selector:".yith-wcbk-people-selector__totals",closeHandler_selector:".yith-wcbk-people-selector__close-handler",openHandler_selector:".yith-wcbk-people-selector__open-handler",toggleHandler_selector:".yith-wcbk-people-selector__toggle-handler",fieldsContainer_selector:".yith-wcbk-people-selector__fields-container",field_selector:".yith-wcbk-people-selector__field",opened_class:"yith-wcbk-people-selector--opened",closed_class:"yith-wcbk-people-selector--closed",onOpen:function(){},onClose:function(){}};return t=b.extend({},f,t),l.val=function(){return l.value},l.value=0,n(),i(),o(),p(!1),u(),a},b.fn.yith_wcbk_people_selector_field=function(e){var s=this,c=b(this),i=!1,r=!1,o=!1,n=!1,t=function(){i=c.find(s.options.value_selector)||!1,r=c.find(s.options.total_selector)||!1,o=c.find(s.options.plus_selector)||!1,n=c.find(s.options.minus_selector)||!1},l=function(){c.on("click",s.options.plus_selector,function(){s.canIncrease()&&d()}),c.on("click",s.options.minus_selector,function(){s.canDecrease()&&u()}),c.on("enableDisableButtons",s.enableDisableButtons)},a=function(){var e=c.data("min"),o=c.data("max");s.min=void 0!==e&&parseInt(e),s.max=void 0!==o&&parseInt(o)},p=function(e,o){if(i&&void 0!==e){var n=e;!1!==s.min&&(n=Math.max(s.min,parseInt(n))),!1!==s.max&&(n=Math.min(s.max,parseInt(n))),n=parseInt(n),i.val(n),c.data("value",n),l=void 0===(t=o)||t,a=_(),r&&r.text(a),i&&i.val(a),l&&i.trigger("change"),s.enableDisableButtons(),s.options.onUpdate()}var t,l,a},_=function(){var e=0;return i&&(e=i.val()||0),parseInt(e)},u=function(e){var o=void 0===e||isNaN(e)?1:parseInt(e),n=_();o=parseInt(o),p(n-o)},d=function(e){var o=void 0===e||isNaN(e)?1:parseInt(e),n=_();o=parseInt(o),p(n+o)},f={value_selector:".yith-wcbk-people-selector__field__value",total_selector:".yith-wcbk-people-selector__field__total",plus_selector:".yith-wcbk-people-selector__field__plus",minus_selector:".yith-wcbk-people-selector__field__minus",buttonDisabledClass:"yith-wcbk-people-selector__field__button--disabled",canIncreaseGlobal:function(){return!0},canDecreaseGlobal:function(){return!0},onUpdate:function(){}};return s.canIncrease=function(){var e=!0;return!1!==s.max&&(e=_()<s.max),e&&s.options.canIncreaseGlobal()},s.canDecrease=function(){var e=!0;return!1!==s.min&&(e=_()>s.min),e&&s.options.canDecreaseGlobal()},s.enableDisableButtons=function(){s.canIncrease()?o.removeClass(s.options.buttonDisabledClass):o.addClass(s.options.buttonDisabledClass),s.canDecrease()?n.removeClass(s.options.buttonDisabledClass):n.addClass(s.options.buttonDisabledClass)},"getValue"===(e=void 0!==e?e:{})?c.data("value")||0:(s.options=b.extend({},f,e),a(),t(),l(),p(_(),!1),c)}}(jQuery,window,document);