(function(a){a(document).ready(function(){var d,e;a("#upload_image_button").on("click",function(b){b.preventDefault();d||(d=wp.media.frames.file_frame=wp.media({title:a(this).data("uploader_title"),button:{text:a(this).data("uploader_button_text")},multiple:!1}),d.on("select",function(){attachment=d.state().get("selection").first().toJSON();var c=a("#upload_image_input img");a("#image_url").val(attachment.url);a("#attach_id").val(attachment.id);a("#upload_image_remove_button").fadeIn();c.attr("src",
    attachment.url);c.attr("srcset",attachment.url)}));d.open()});a("#upload_image_remove_button").on("click",function(b){a("#upload_image_input img").attr("src","").replaceWith(yith_wcfm_media.wc_placeholder_img);a("#upload_image_remove_button").fadeOut();a("#attach_id").val("");a("#image_url").val("");b.preventDefault()});a("#add_product_gallery_image").on("click",function(b){b.preventDefault();e||(e=wp.media.frames.file_frame=wp.media({title:a(this).data("uploader_title"),button:{text:a(this).data("uploader_button_text")},
    multiple:!0}),e.on("select",function(){image_ids=e.state().get("selection");image_ids.map(function(c){c=c.toJSON();var b='<span class="image"><span class="dashicons dashicons-dismiss remove_image"></span><img width="150" height="150" src="'+c.url+'" class="attachment-thumbnail size-thumbnail"></span>',d=a("#product_gallery");b+='<input type="hidden" name="product_gallery[]" value="'+c.id+'" />';d.append(b);c=d.find(".woocommerce-placeholder");"undefined"!=typeof c&&c.remove()})}));e.open()});a("body").on("click",
    ".remove_image",function(){var b=a("#product_gallery");0==b.find("span.image").length-1&&b.append(yith_wcfm_media.wc_placeholder_img);a(this).parent(".image").remove()})})})(jQuery);