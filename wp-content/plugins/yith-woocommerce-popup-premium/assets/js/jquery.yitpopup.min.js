!function(a,b,c){"use strict";a.yit_popup=function(d,e){var f={popup_class:"ypop",content:"",delay:0,position:"center",mobile:!1,destroy_on_close:!0},g=this;g.settings={};var h=a(d);g.init=function(){g.settings=a.extend({},f,e),m(),l()};var l=function(){a(c).on("touchstart click",".ypop-overlay",function(b){(a(b.target).hasClass("close")||0==a(b.target).parents(".ypop-overlay").length)&&p()}).on("keyup",function(a){27==a.keyCode&&p()}).on("click",".ypop-wrapper a.close",function(){p()}),a(b).on("resize",function(){n()}),a("html").removeClass("yit-opened"),o()},m=function(){0==a("body").find(".ypop-modal").length?g.bigwrapper=a("<div />",{class:"ypop-modal"}).prependTo("body"):g.bigwrapper=a("body").find(".ypop-modal"),0==g.bigwrapper.find(".ypop-overlay").length?g.overlay=a("<div />",{class:"ypop-overlay"}).appendTo(g.bigwrapper):g.overlay=g.bigwrapper.find(".ypop-overlay"),0==g.bigwrapper.find(".ypop-wrapper").length?g.popup=a("<div />",{class:"ypop-wrapper "+g.settings.popup_class}).appendTo(g.bigwrapper):g.popup=g.bigwrapper.find(".ypop-wrapper"),0==g.popup.find(".close").length?g.close=a("<a />",{class:"close"}).appendTo(g.popup):g.close=g.popup.find(".close")},n=function(){var a=g.popup.outerWidth();g.popup.outerHeight();g.settings.mobile&&((g.popup.outerHeight()>jQuery(b).height()-120||g.popup.outerWidth()>jQuery(b).width()-60)&&(a=jQuery(b).width()-60),g.popup.css({width:a+"px",height:"auto"})),"center"==g.settings.position?g.popup.css({position:"fixed",top:Math.max(0,(jQuery(b).height()-g.popup.outerHeight())/2-50)+"px",left:Math.max(0,(jQuery(b).width()-a)/2)+"px"}):"left-top"==g.settings.position?g.popup.css({position:"fixed",top:" 0px",left:"0px"}):"left-bottom"==g.settings.position?g.popup.css({position:"fixed",bottom:" 0px",left:"0px"}):"right-bottom"==g.settings.position?g.popup.css({position:"fixed",bottom:" 0px",right:"0px"}):"right-top"==g.settings.position&&g.popup.css({position:"fixed",top:" 0px",right:"0px"})},o=function(){1*g.settings.delay>0?setTimeout(function(){r(),a(".ypop-modal").addClass("open"),n()},g.settings.delay):(r(),a(".ypop-modal").addClass("open"),n())},p=function(){h.trigger("close.ypop"),a(".ypop-modal").removeClass("open"),a(".ypop-modal").data("is_closed","yes"),g.settings.destroy_on_close&&q()},q=function(){g.popup.remove(),g.overlay.remove(),h.removeData("yit_popup")},r=function(){""!=g.settings.content?g.popup.html(g.settings.content):h.data("container")?g.popup.html(a(h.data("container")).html()):h.data("content")?g.popup.html(h.data("content")):h.attr("title")?g.popup.html(h.attr("title")):g.popup.html(""),g.popup.find("form, input, label, a").each(function(){if(void 0!==a(this).attr("id")){var b=a(this).attr("id")+"_ypop";a(this).attr("id",b)}if(void 0!==a(this).attr("for")){var b=a(this).attr("for")+"_ypop";a(this).attr("for",b)}}),0==g.overlay.find(".close").length?g.close=a("<a />",{class:"close"}).appendTo(g.popup):g.close=g.overlay.find(".close")};e.open_on_click&&o(),g.init()},a.fn.yit_popup=function(b){return this.each(function(){if(void 0===a(this).data("yit_popup")){var c=new a.yit_popup(this,b);a(this).data("yit_popup",c)}})}}(jQuery,window,document);