jQuery(function(a){var s=a("#yith-wcmbs-message-to-send"),e=a("#yith-wcmbs-send-button"),t=a("#yith-wcmbs-send-message-editor"),i=0<t.length?t.data("thread-id"):0,n=0<t.length?t.data("user-id"):0,d=t.find(".spinner"),c=a("#yith-wcmbs-messages-list"),l=c.data("messages-count"),r=a("#yith-wcmbs-get-older-messages"),o=a("#get-older-spinner"),g=a("#yith-wcmbs-messages").find(".inside"),m=function(){var e=c.find("li").length;l<=e&&r.hide()},h=function(){c.length&&g.animate({scrollTop:c.outerHeight()},1e3,"swing")};e.on("click",function(){var e;i&&0<s.val().length&&(e={thread_id:i,user_id:n,message:s.val(),action:"yith_wcmbs_send_message"},d.addClass("is-active"),a.ajax({type:"POST",data:e,url:ajaxurl,success:function(e){c.append(e),s.val(""),d.removeClass("is-active"),h()}}))}),r.on("click",function(){var e=c.find("li").length,s={thread_id:i,offset:e,action:"yith_wcmbs_get_older_messages"};o.addClass("is-active"),a.ajax({type:"POST",data:s,url:ajaxurl,success:function(e){c.prepend(e),o.removeClass("is-active"),m()}})}),m(),h()});